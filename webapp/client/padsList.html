<template name="padsList">
  <div id="container">
    <div id="header" class="header">
      {{#if currentUser}}
        <div class="user">
          {{#with currentContact}}
            {{> contactAvatar}}
          {{/with}}
        </div>
        {{> settingDropdown}}
      {{else}}
        {{#if hasKnotableLoginToken}}
          <button class="btn login-button" disabled="disabled">Logging in...</button>
        {{else}}
          <button class="btn login-button">Login</button>
        {{/if}}
      {{/if}}
      <div class="left-header">
        <a href="#" target="_blank" class="btn redirect-to-knotable" tabindex='5'>
          k
        </a>
        <div class="title" data-latest-id="{{latestPad._id}}">
          {{contentEditableSubject}}
        </div>
        {{#if latestPad}}
          {{#with latestPad}}
            {{> sharePadDropdown}}
          {{/with}}
        {{/if}}
        <i class='icon icon-edit show-compose invisible'></i>
      </div>
    </div>

    <div class="padList">
      {{> sel_text_menu}}

      <div class="pad currentDatePad">
        <div class="compose compose-popup files_holder" id="compose-popup">
          <div class="compose-wrapper">
            <div contenteditable="true" class="new-knote-title" placeholder="Take knote" tabindex="1" spellcheck="false"></div>
            <div class="clearfix"></div>
            <div id="message-textarea" contenteditable="true" class="new-knote-body file-container" spellcheck="false" tabindex="2"></div>
            <div class="post-btn-container">
              <input type="button" class="btn my-btn post-button" value="Post" tabindex="3" disabled>
              <div class="attachment">
                {{> file_upload}}
              </div>
            </div>
          </div>
        </div>
        {{#with latestPad}}
          <div class="knote-list latest-knotes">
            <div class="unarchived-knotes">
              {{#each knotes.unarchived}}
                {{> knote}}
              {{/each}}
            </div>
            <div class="archived-knotes">
              {{#each knotes.archived}}
                {{> knote}}
              {{/each}}
            </div>
          </div>
        {{/with}}
      </div>

      {{#each restPads}}
        {{> padItem}}
      {{/each}}

    </div>

  </div>
</template>



<template name="padItem">
  <div class="header padItem" data-subject="{{subject}}" data-id="{{_id}}">
    <div class="subject">
      <a href="{{knotableLink}}" target="_blank" class="min-k-btn btn">k</a>
      <span class="title">{{ subject }}</span>
      {{> sharePadDropdown}}
    </div>
    <div class="divider"></div>
  </div>

  <div class="pad">
    <div class="knote-list">
      <div class="unarchived-knotes">
        {{#each knotes.unarchived}}
          {{> knote}}
        {{/each}}
      </div>
      <div class="archived-knotes">
        {{#each knotes.archived}}
          {{> knote}}
        {{/each}}
      </div>
    </div>
  </div>
</template>



<template name="sharePadDropdown">
  <div class="share-part" data-id="{{_id}}">
    <button class="btn my-btn share-pad-btn">Share</button>
    <ul class="share-pad-dropdown">
      <li class="share-invite"><i class="icon icon-user"></i>Invite someone</li>
      <li class="share-slack"><i class="icon icon-slack"></i>Post to Slack</li>
    </ul>
  </div>
</template>



<template name="settingDropdown">
  <ul id="setting-dropdown">
    <li><a href="http://beta.knotable.com/settings" target="_blank"><i class="icon icon-info"></i>Knotable Settings</a></li>
    <li><a href="#" class="logout"><i class="icon icon-logout"></i>Logout</a></li>
  </ul>
</template>



<Template name="sel_text_menu">
  <div id="sel-text-menu" class="sel-arrow-down">
    <ul class='clearfix'>
      <li><button data-menu="bold"><span class="bold">B</span></button></li>
      <li><button data-menu="italic"><span class="italic">I</span></button></li>
      <li><button data-menu="highlight"><span class="highlight">H</span></button></li>
      <!--<li><button data-menu="unhighlight">Unlight</button></li> think this is subset of tx -->
      <!--<li><button data-menu="clip"><i class="fa fa-quote-left"></i>Q<i class="fa fa-quote-right"></i></button></li> rm clip until we make it look nice and work well -->
      <!--<li><button data-menu="comment"><i class="fa fa-comment"></i><span>A</span></button></li> commenting isn't working at the moment and its errors are creating problems-->
      <li><button data-menu="tx"><i class="fa fa-tx"></i><span>Tx</span></button></li>
    </ul>
  </div>
</Template>



<Template name="contentEditable">
    <div {{attributes}}>{{encodedValue}}</div>
</Template>
